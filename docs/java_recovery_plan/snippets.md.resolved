# Java Ironclad Patterns (Snippets)

## Controller Pattern

```java
@RestController
@RequestMapping("/api/v1/resource-name") // TODO: Change path
@RequiredArgsConstructor
public class ResourceController {

    // private final ResourceService service; // TODO: Uncomment when Service is ready

    /**
     * Registration / Creation
     */
    @PostMapping
    public ResponseEntity<Void> create(@RequestBody @Valid CreateRequest request) {
        // service.create(request);
        return ResponseEntity.status(HttpStatus.CREATED).build();
    }

    // TODO: Add DTO classes (inner static class or separate file)
    // public record CreateRequest(@NotBlank String name) {}
}
```

### Key Points
1.  **Annotations**: `@RestController`, `@RequestMapping`, `@RequiredArgsConstructor` are the "Holy Trinity". Always write them first.
2.  **Constructor Injection**: `@RequiredArgsConstructor` (Lombok) handles dependency injection automatically for `final` fields.
3.  **Input Validation**: Always use `@RequestBody` and `@Valid` together for POST/PUT.
4.  **Response**: Return `ResponseEntity<T>`. Use `Void` if no body is returned.

## Service Pattern

```java
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true) // Default to read-only
public class ResourceService {

    // private final ResourceRepository repository;

    /**
     * Create (Write operation)
     */
    @Transactional // Override for write
    public void create(CreateRequest request) {
        // Entity entity = new Entity(request.name());
        // repository.save(entity);
    }

    /**
     * Read (Read-only operation)
     */
    public ResourceResponse findById(Long id) {
        // return repository.findById(id)
        //     .map(this::toResponse)
        //     .orElseThrow(() -> new ResourceNotFoundException("Resource not found with id: " + id));
        return null; // dummy
    }
}
```

### Key Points
1.  **Annotations**: `@Service`, `@RequiredArgsConstructor`.
2.  **Transaction Management**:
    *   Class level: `@Transactional(readOnly = true)` (Safety first! Prevents accidental writes).
    *   Write methods: `@Transactional` (Override to allow writes).
3.  **Exception Handling**: Use `.orElseThrow()` for clean 404 handling.
